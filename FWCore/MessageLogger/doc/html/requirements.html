<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<BODY bgcolor="FFFFFF">
<title>
          CMS MessageLogger: Open Issues Concerning Features Wanted by CMS
</title>

<center>
<h1> <img src="header-public.gif" align="center"> </h1>

<font color=red>
<h1>CMS MessageLogger Service
<br> 
Open Issues Concerning Features Wanted by CMS</h1>
</font>
</center>
<ul>
<li> <a href=#multipleID> Multiple Message IDs </a>
</ul>
<hr>
<a name=#multipleID></a>
<h2>Multiple Message IDs </h2>

<h3> The requirement </h3>
<ul>
A message can be issued  with multiple ID's, as in 
<pre>
  edm::LogWarning(tracking|overflow) << "some more text";
</pre>
</ul>

This is to be treated as both an ID=tracking message, and an ID=overflow
message.

<h3> Questions </h3>

What does it mean to be two types of message.  The easiest thing to do would
be to issue two distinct messagesm but assumedly that is not the most desirable
behavior.  The questions include:
<ul>
<li> How should the output message look?  (We implied that just including the 
or-ed ID's as the ID would be OK.)
<li> Which destinations should react to this message?  (Probably destinations
that would react to either of the combined ID's.)
<li> What should this do to the message counts for each ID for each destination?
<li> How is this treated for statistics?  (Probably one message of each type;
but the first-two, last-one contexts might mant to behave specially.)
</ul>

<h3> Proposed treatment </h3>
When a message is issued
<pre>
  edm::LogWarning(tracking|overflow) << "some more text";
</pre>
message counts for both "tracking" and "overflow" ID's are incremented.
If a given destination would react to <em>either</em> a "tracking" message 
or an "overflow" message, it will react to this message, but only a single
copy of the message output will appear.
<p>
In that message output, the ID will look like tracking|overflow, and even if
the combined length is longer than the normally permitted length the full
combined ID's will appear.
<p> 
Statistics destinations will note the appearance of one "tracking" message
and one "overflow" message; thus the total of counts by message ID will no 
longer match the total of counts by severity.  The context (of the first 
two and last one of each type of message) kept by the statistics destination
will react as it would to a single ID message of each type of ID.  Thus it
is possble to have the same context (event number or whatever) noted twice
(in two different ID's) caused by this one error message.
   
<h3> Work consequences </h3>

The "issue the message twice" attitude would requiure no work on ErrorLogger
internals, and routine work in the LogXYZ() functions. However, that is not
the desired behavior.
<p>
The above proposal will require modifying the nature of a message ID within
ErrorLogger.  At some points it is a potentially compound ID; at others (for
example, in the limit maps and statistics maps) it is exactly as before.
This is non-trivial, as the messageID penetrates much of the package, but 
as long as the behavior to shoot for is well-defined, this appears to be a
solvable task.

<p><center>
<img src="bar.gif"></center>

<p><center>
<a href="http://www.uscms.org/SoftwareComputing/index.html">
USCMS Software and Computing Home Page </a> -
<a href="MessageLogger.html">CMS MessageLogger Service Page</a>
</center>

<p>
      <hr>
      <address><a href="mailto:mf@fnal.gov">Mark Fischler</a></address>
<!-- hhmts start -->
Last modified: December 1, 2005
<!-- hhmts end -->
</body>
